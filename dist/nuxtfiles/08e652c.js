(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{896:function(t,e,o){"use strict";o.r(e);var c=o(7),n=(o(40),o(16),o(123),o(95)),r={data:function(){return{mobileProductDialog:!1,mobileProductDialogData:{},initCheckout:!1,products:[],addToCartLoading:!1,delivery_cost:0,total:0,subTotal:0,voucher_code:"",discount:"",discount_type:"",discount_rate:"",newSubTotal:"",loading:!1,productsLoading:!1}},computed:{},methods:{toCheckout:function(){this.$router.push(this.localePath(this.$auth.loggedIn?"/checkout/finalize":"/checkout"))},fetch:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var area;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.productsLoading=!0,area=JSON.parse(localStorage.getItem("default_".concat(localStorage.getItem("default_location")))),e.next=4,t.$store.dispatch("cart/get",{branch:area.branches?area.branches[0]:area.branch_id}).then((function(){t.products=t.$store.state.cart.items,t.subTotal=t.$store.state.cart.total,t.delivery_cost=t.$store.state.cart.delivery_cost,t.total=t.subTotal+t.delivery_cost}));case 4:t.productsLoading=!1;case 5:case"end":return e.stop()}}),e)})))()},i18n_me:function(t,e){return"en"===this.$i18n.locale?e:t},updateDialogShow:function(t){this.mobileProductDialog=t},updateDialogData:function(data){this.mobileProductDialogData=data},applyVoucher:function(){var t=this;this.loading=!0,Object(n.c)({v_code:this.voucher_code,total:this.total}).then((function(e){t.discount_rate=e.discount_rate,t.discount_type=e.discount_type;t.discount=e.discount_rate+{fixed:"KWD",percentage:"%",free_delivevery:"FD"}[t.discount_type],"fixed"==t.discount_type?t.newSubTotal=Number(t.total-Number(t.discount_rate)):"percentage"==t.discount_type?t.newSubTotal=t.total-t.total*(Number(t.discount_rate)/100):"free_delivevery"==t.discount_type&&(t.delivery_cost=0),t.$store.commit("checkout/SET_V_CODE",t.voucher_code),t.loading=!1,t.$toast.success(e.message)})).catch((function(e){t.loading=!1}))},changeCount:function(t,e,o){var c=this;if(o+t===0)return this.$store.dispatch("cart/remove",e).then((function(){c.fetch()}));this.addToCart(e,{count:t})},addToCart:function(t){var e=arguments,o=this;return Object(c.a)(regeneratorRuntime.mark((function c(){var data;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return data=e.length>1&&void 0!==e[1]?e[1]:{},o.addToCartLoading=!0,c.next=4,o.$store.dispatch("cart/add",{product_id:t,quantity:data.count||1}).then((function(){o.fetch()}));case 4:o.addToCartLoading=!1;case 5:case"end":return c.stop()}}),c)})))()}},mounted:function(){this.fetch()}},l=r,d=o(8),component=Object(d.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"pt-5"},[e("p",{staticClass:"text-h7 font-weight-bold mb-5 mx-auto",staticStyle:{width:"fit-content",color:"#65382c","border-bottom":"1px solid #65382c"}},[t._v(t._s(t.$t("cart.order_details")))]),t._v(" "),t._l(t.products,(function(o,c){return t.products.length?e("v-card",{key:c,staticClass:"a-product-card d-flex align-center justify-space-betweenm my-1",staticStyle:{"border-radius":"10px"},attrs:{width:"100%",color:"#fff"}},[e("v-img",{staticClass:"rounded-lg",staticStyle:{cursor:"pointer"},attrs:{cover:"",height:"50",width:"50","lazy-src":"https://placehold.co/70x70/png?text=Product",src:"https://placehold.co/70x70/png?text=Product"},on:{click:function(e){return t.productViewed(o.product_id)}}}),t._v(" "),e("v-card-text",{staticClass:"py-0 px-2 d-flex flex-row justify-space-between",staticStyle:{height:"40px"}},[e("v-row",{staticClass:"align-center justify-space-between h-100",staticStyle:{height:"100%"},attrs:{"no-gutters":""}},[e("v-col",{staticClass:"px-0 my-0 mx-0 py-0 d-flex flex-column justify-space-between h-100",staticStyle:{height:"100%"}},[e("p",{staticClass:"mb-0 font-weight-bold text-left w-100",class:{"text-right":"ar"==t.$i18n.locale},staticStyle:{color:"#65382c"}},[t._v("\n            "+t._s(o.product["name_".concat(t.$i18n.locale)])+"\n          ")]),t._v(" "),e("p",{staticClass:"mb-0 text-left",class:{"text-right":"ar"==t.$i18n.locale},staticStyle:{color:"#65382c"}},[t._v("\n            "+t._s(o.price)+" "+t._s(t.$t("products.KWD"))+"\n          ")])]),t._v(" "),e("div",{staticClass:"d-flex align-center justify-center"},[e("v-btn",{staticClass:"rounded-sm px-0 py-0 mx-0 my-0",attrs:{loading:t.addToCartLoading,small:"",icon:""},on:{click:function(e){return t.changeCount(1,o.product_id,o.quantity)}}},[e("v-icon",{staticClass:"mx-0 my-0 rounded",staticStyle:{color:"#65382c"},attrs:{small:""}},[t._v("mdi-plus")])],1),t._v(" "),e("input",{staticClass:"rounded text-center px-0 font-weight-bold",staticStyle:{"text-align":"center",outline:"none",width:"25px",color:"#65382c"},attrs:{type:"text",min:"1",readonly:""},domProps:{value:o.quantity}}),t._v(" "),e("v-btn",{staticClass:"rounded-sm px-0 py-0 mx-0 my-0",attrs:{loading:t.addToCartLoading,small:"",icon:""},on:{click:function(e){return t.changeCount(-1,o.product_id,o.quantity)}}},[e("v-icon",{staticClass:"mx-0 my-0 rounded",staticStyle:{color:"#65382c"},attrs:{small:""}},[t._v(t._s(1===o.quantity?"mdi-delete":"mdi-minus"))])],1)],1)],1)],1)],1):t._e()})),t._v(" "),t.products.length||t.productsLoading?t._e():e("p",{staticClass:"text-center font-weight-bold text-h6",staticStyle:{height:"100%",color:"#65382c"}},[t._v("\n    "+t._s(t.$t("cart.no_products"))+"\n  ")]),t._v(" "),e("v-row",{staticClass:"justify-center flex-wrap",attrs:{"no-gutters":""}},[t.productsLoading?e("v-progress-circular",{attrs:{size:50,color:"#65382c",indeterminate:""}}):t._e()],1),t._v(" "),e("v-divider",{staticClass:"my-3",staticStyle:{color:"grey"}}),t._v(" "),e("v-col",{staticClass:"mx-0 my-0 pa-0 px-0 d-flex flex-column align-start"},[e("p",{staticClass:"font-weight-bold text-h7 pb-0 mb-0",staticStyle:{color:"#65382c"}},[t._v(t._s(t.$t("checkout.voucher_code")))]),t._v(" "),e("v-text-field",{staticClass:"rounded-lg mt-0 py-2",staticStyle:{width:"100%"},attrs:{"hide-details":"",outlined:"",color:"#65382c",placeholder:t.$t("checkout.enter_voucher")},scopedSlots:t._u([{key:"append",fn:function(){return[e("v-row",{staticClass:"align-center justify-center",staticStyle:{"margin-top":"-7px"},attrs:{"no-gutters":""}},[e("v-btn",{staticClass:"my-auto mx-0 rounded-lg",attrs:{elevation:"0",text:"",loading:t.loading},on:{click:function(e){return t.applyVoucher()}}},[t._v("\n            "+t._s(t.$t("checkout.apply"))+"\n          ")])],1)]},proxy:!0}]),model:{value:t.voucher_code,callback:function(e){t.voucher_code=e},expression:"voucher_code"}})],1),t._v(" "),e("v-col",{staticClass:"mx-0 my-0 pa-0 px-0"},[e("v-row",{staticClass:"align-center justify-space-between",attrs:{"no-gutters":""}},[e("p",{staticClass:"my-0 mx-0 px-0 py-1 font-weight-bold text-h7",staticStyle:{color:"#65382c"}},[t._v("\n        "+t._s(t.$t("profile.orders.subtotal"))+"\n      ")]),t._v(" "),e("p",{staticClass:"my-0 mx-0 px-0 py-1 font-weight-bold text-h7",staticStyle:{color:"#65382c"}},[t._v("\n        "+t._s(t.subTotal)+" "+t._s(t.$t("products.KWD"))+"\n      ")])]),t._v(" "),t.newSubTotal?e("v-row",{staticClass:"align-center justify-space-between",attrs:{"no-gutters":""}},[e("p",{staticClass:"my-0 mx-0 px-0 py-1 font-weight-bold text-h7",staticStyle:{color:"#65382c"}},[t._v("\n        "+t._s(t.$t("new_sub_total"))+"\n      ")]),t._v(" "),e("p",{staticClass:"my-0 mx-0 px-0 py-1 font-weight-bold text-h7",staticStyle:{color:"#65382c"}},[t._v("\n        "+t._s(t.newSubTotal)+" "+t._s(t.$t("products.KWD"))+"\n      ")])]):t._e(),t._v(" "),t.discount?e("v-row",{staticClass:"align-center justify-space-between",attrs:{"no-gutters":""}},[e("p",{staticClass:"my-0 mx-0 px-0 py-1 font-weight-bold text-h7",staticStyle:{color:"#65382c"}},[t._v("\n        "+t._s(t.$t("checkout.discount"))+"\n      ")]),t._v(" "),e("p",{staticClass:"my-0 mx-0 px-0 py-1 font-weight-bold text-h7",staticStyle:{color:"#65382c"}},[t._v("\n        "+t._s(t.discount)+" "+t._s(t.$t("products.KWD"))+"\n      ")])]):t._e(),t._v(" "),e("v-row",{staticClass:"align-center justify-space-between",attrs:{"no-gutters":""}},[e("p",{staticClass:"my-0 mx-0 px-0 py-1 font-weight-bold text-h7",staticStyle:{color:"#65382c"}},[t._v("\n        "+t._s(t.$t("checkout.delivery_cost"))+"\n      ")]),t._v(" "),e("p",{staticClass:"my-0 mx-0 px-0 py-1 font-weight-bold text-h7",staticStyle:{color:"#65382c"}},[t._v("\n        "+t._s(t.delivery_cost)+" "+t._s(t.$t("products.KWD"))+"\n      ")])]),t._v(" "),e("v-row",{staticClass:"align-center justify-space-between",attrs:{"no-gutters":""}},[e("p",{staticClass:"my-0 mx-0 px-0 py-1 font-weight-bold text-h7",staticStyle:{color:"#65382c"}},[t._v("\n        "+t._s(t.$t("checkout.total"))+"\n      ")]),t._v(" "),e("p",{staticClass:"my-0 mx-0 px-0 py-1 font-weight-bold text-h7",staticStyle:{color:"#65382c"}},[t._v("\n        "+t._s(t.total)+" "+t._s(t.$t("products.KWD"))+"\n      ")])]),t._v(" "),e("v-divider",{staticClass:"my-3",staticStyle:{color:"grey"}}),t._v(" "),e("v-row",{staticClass:"mt-3 mb-0 align-center justify-space-around",attrs:{"no-gutters":""}},[e("v-btn",{staticClass:"rounded-lg",attrs:{elevation:"0",color:"#ecbaa8"},on:{click:function(e){return t.toCheckout()}}},[t._v(t._s(t.$t("cart.pay_now")))]),t._v(" "),e("v-btn",{staticClass:"rounded-lg",staticStyle:{border:"1px solid grey"},attrs:{elevation:"0",text:"",to:t.localePath("/products")}},[t._v(t._s(t.$t("cart.continue_shopping")))])],1)],1)],2)}),[],!1,null,null,null);e.default=component.exports}}]);