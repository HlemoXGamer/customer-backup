(window.webpackJsonp=window.webpackJsonp||[]).push([[2,15],{739:function(t,e,o){var content=o(752);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(2).default)("33771c34",content,!0,{sourceMap:!1})},751:function(t,e,o){"use strict";o(739)},752:function(t,e,o){var r=o(1)((function(i){return i[1]}));r.push([t.i,".vue__time-picker{width:100%}.vue__time-picker input.display-time{border:2px solid #d7d7d7;border-radius:8px;height:42px;width:100%}.vue__time-picker .dropdown.drop-up,.vue__time-picker-dropdown.drop-up{bottom:calc(2.3em + 10px);top:auto}.vue__time-picker .dropdown,.vue__time-picker-dropdown{bottom:auto;top:calc(2.3em + 10px);width:100%}.vue__time-picker .dropdown ul li:not([disabled]).active,.vue__time-picker .dropdown ul li:not([disabled]).active:focus,.vue__time-picker .dropdown ul li:not([disabled]).active:hover,.vue__time-picker-dropdown ul li:not([disabled]).active,.vue__time-picker-dropdown ul li:not([disabled]).active:focus,.vue__time-picker-dropdown ul li:not([disabled]).active:hover{background:#353030;color:#fff}.vue__time-picker .dropdown ul.apms,.vue__time-picker .dropdown ul.minutes,.vue__time-picker .dropdown ul.seconds,.vue__time-picker-dropdown ul.apms,.vue__time-picker-dropdown ul.minutes,.vue__time-picker-dropdown ul.seconds{border-left:1px solid #4e4949}",""]),r.locals={},t.exports=r},760:function(t,e,o){"use strict";o.r(e);o(15),o(21),o(9),o(25),o(20),o(26);var r=o(5),c=(o(802),o(125),o(16),o(22)),n=o(73),l=o(323),d=o(95);function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v={computed:h(h(h(h({},Object(c.d)("cart",["items","total","delivery_cost","delivery_fee","est_time"])),Object(c.d)("checkout",["step","checkout","checkout_loading"])),Object(c.c)("checkout",["shipping","sub_total"])),Object(n.b)("checkout",["form.is_pickup","form.delivery_date"])),data:function(){return{is_picked:!1,disabled:!1,same_day:!1,label:!1,checkbox_req:!1,branch_start:"",branch:"",same_date_branch:{},loading:!1,voucher_code:"",discount:"",discount_type:"",discount_rate:"",newSubTotal:""}},mounted:function(){this.setPicked(),this.get_branch()},methods:{get_branch:function(){var t=this;Object(l.a)(localStorage.getItem("guest_branch")).then((function(e){var data=e.data;t.branch=data})),Object(l.a)(2).then((function(e){var data=e.data;t.same_date_branch=data}))},calculateEstimatedTime:function(t,e,o,r){if(-1!=Math.sign(t)){var c=t%60,n=Math.floor(t/60);return Math.floor(n/24)+" "+e+" - "+n%24+" "+o+" - "+c+" "+r}var l=Math.abs(t);c=l%60,n=Math.floor(l/60);return":"+Math.floor(n/24)+" "+e+" - "+n%24+" "+o+" - "+c+" "+r},i18n_me:function(t,e){return"en"===this.$i18n.locale?e:t},applyVoucher:function(){var t=this;this.loading=!0,Object(d.c)({v_code:this.voucher_code,total:this.total}).then((function(e){t.discount_rate=e.discount_rate,t.discount_type=e.discount_type;t.discount=e.discount_rate+{fixed:"KWD",percentage:"%",free_delivevery:"FD"}[t.discount_type],"fixed"==t.discount_type?t.newSubTotal=Number(t.total-Number(t.discount_rate)):"percentage"==t.discount_type?t.newSubTotal=t.total-t.total*(Number(t.discount_rate)/100):"free_delivevery"==t.discount_type&&(t.delivery_cost=0),t.$store.commit("checkout/SET_V_CODE",t.voucher_code),t.loading=!1,t.$toast.success(e.message)})).catch((function(e){t.loading=!1}))},removeDiscount:function(t,e){this.$store.dispatch("checkout/removeDiscount",{index:t,id:e})},setPicked:function(){var t=this,e=0;e=this.$auth.loggedIn?localStorage.getItem("default_area")?JSON.parse(localStorage.getItem("default_area")).branches[0].id:JSON.parse(localStorage.getItem("default_address")).branch_id:localStorage.getItem("guest_branch"),Object(l.a)(e).then((function(e){var data=e.data;t.branch=data;var o=new Date,r=t.branch.start.split(":")[0],c=t.branch.end.split(":")[0];t.branch_start=r,(o.getHours()>=parseInt(c)&&parseInt(c)>12||o.getHours()<parseInt(r))&&o.getHours()%24>=parseInt(c)?(t.is_picked=!0,t.disabled=!0,t.label=!0,t.$store.commit("checkout/SET_IS_PICKUP",!0)):(t.is_picked=!1,t.disabled=!1,t.label=!1,t.$store.commit("checkout/SET_IS_PICKUP",!1)),o.getHours()>=0&&parseInt(r)>o.getHours()&&(t.is_picked=!1,t.same_day=!0,t.checkbox_req=!0,t.$store.commit("checkout/SET_IS_PICKUP",!0))})).catch((function(e){"You Are Trying To Access A Forbidden Request"===e&&t.$router.push(t.localePath("/profile/orders")),"Unauthenticated."===e&&t.$router.push({path:t.localePath("/login"),query:{order_id:t.id}})}))},reverseCheckbox:function(t){console.log(this.same_day),console.log(this.is_picked),!0===this.same_day||!0===this.is_picked?(console.log("yes"),this.$store.commit("checkout/SET_IS_PICKUP",!0)):(console.log("no"),this.$store.commit("checkout/SET_IS_PICKUP",!1),this.$store.commit("checkout/SET_DELIVERY_DATE",null));var e=new Date;!0===this.checkbox_req&&e.getHours()>=0&&parseInt(this.branch_start)>e.getHours()?this[t]=!0:this.checkbox_req=!1}}},m=(o(804),o(6)),component=Object(m.a)(v,(function(){var t=this,e=t._self._c;return e("v-card",{attrs:{color:t.checkout_loading?"":"grey lighten-4",rounded:"lg",loading:t.checkout_loading,disabled:t.checkout_loading}},[e("v-card-text",{staticClass:"pa-8"},[e("p",{staticClass:"text-h6 font-weight-bold grey--text text--darken-1"},[t._v("\n      "+t._s(t.$t("checkout.summary"))+"\n    ")]),t._v(" "),e("v-checkbox",{attrs:{disabled:t.disabled||t.same_day},on:{click:function(e){return t.reverseCheckbox("same_day")}},scopedSlots:t._u([{key:"label",fn:function(){return[e("div",{staticClass:"ml-3"},[e("p",{staticClass:"mb-0 grey--text text-subtitle-2"},[t._v("\n            "+t._s(t.$t("checkout.schedule"))+"\n          ")])])]},proxy:!0}]),model:{value:t.is_picked,callback:function(e){t.is_picked=e},expression:"is_picked"}}),t._v(" "),e("v-checkbox",{attrs:{disabled:t.is_picked},on:{click:function(e){return t.reverseCheckbox("is_picked")}},scopedSlots:t._u([{key:"label",fn:function(){return[e("div",{staticClass:"ml-3"},[e("p",{staticClass:"mb-0 grey--text text-subtitle-2"},[t._v("\n            "+t._s(t.$t("checkout.schedule_same_day"))+"\n          ")])])]},proxy:!0}]),model:{value:t.same_day,callback:function(e){t.same_day=e},expression:"same_day"}}),t._v(" "),t.label?e("p",{staticClass:"mb-0 primary--text text-subtitle-2"},[t._v("\n      "+t._s(t.$t("checkout.closed_branch"))+"\n    ")]):t._e(),t._v(" "),t.is_picked||t.same_day?e("CheckoutSchedule",{attrs:{same_day:t.same_day,branch:t.branch,same_date_branch:t.same_date_branch}}):t._e(),t._v(" "),t.items&&t.items.length>0?[t._l(t.items,(function(o){return e("div",{key:o.id,staticClass:"dropcart__product"},[e("div",{staticClass:"dropcart__product-info"},[e("div",{staticClass:"dropcart__product-name row"},[e("span",{staticClass:"col-8 font-primary"},[t._v("\n              "+t._s(t.i18n_me(o.product.name_ar,o.product.name_en))+" x\n              "+t._s(o.quantity)+"\n            ")]),t._v(" "),e("span",{staticClass:"col-4 dropcart__product-price"},[t._v("\n              KWD "+t._s(o.price))])])])])})),t._v(" "),e("div",{class:"dropcart__totals text-".concat("ar"===t.$i18n.locale?"right":"left"," font-primary")},[e("table",[e("tbody",[[e("tr",[e("th",[t._v(t._s(t.$t("checkout.sub_total")))]),t._v(" "),e("td",[t._v("KWD "+t._s(t.total))])]),t._v(" "),t.newSubTotal?e("tr",[e("th",[t._v(t._s(t.$t("checkout.new_sub_total")))]),t._v(" "),e("td",[t._v("KWD "+t._s(t.newSubTotal))])]):t._e(),t._v(" "),t.discount?e("tr",[e("th",[t._v(t._s(t.$t("checkout.discount")))]),t._v(" "),e("td",{staticClass:"font-weight-bold green--text text--lighten-1"},[t._v("\n                  "+t._s(t.discount)+"\n                ")])]):t._e(),t._v(" "),e("tr",[e("th",[t._v(t._s(t.$t("checkout.delivery_cost")))]),t._v(" "),e("td",[t._v("KWD "+t._s(t.delivery_cost))])])],t._v(" "),e("tr",[e("th",{staticStyle:{"background-color":"#99999930",height:"1px"},attrs:{colspan:"2"}})]),t._v(" "),e("tr",{staticClass:"mt-5"},[e("th",[t._v(t._s(t.$t("checkout.total")))]),t._v(" "),t.newSubTotal?e("td",[t._v("KWD "+t._s(t.newSubTotal+t.delivery_fee))]):e("td",[t._v("KWD "+t._s(t.total+t.delivery_fee))])]),t._v(" "),e("tr",[e("td",{staticClass:"text-center font-weight-bold pt-5",attrs:{colspan:"2"}},[t._v("\n                "+t._s(t.$t("checkout.estimated_message"))+"\n\n                "),e("span",{staticStyle:{display:"block"}},[t._v(t._s(t.calculateEstimatedTime(t.est_time,t.$t("checkout.day"),t.$t("checkout.hour"),t.$t("checkout.minute"))))])])])],2)])])]:t._e(),t._v(" "),e("v-row",{staticClass:"mt-6",class:t.$vuetify.breakpoint.smAndDown?"flex-column":"",attrs:{align:"center"}},[e("v-text-field",{style:t.$vuetify.breakpoint.smAndDown?"width: 100%;":"",attrs:{"hide-details":!0,dense:"",label:t.$t("checkout.enter_voucher"),outlined:""},model:{value:t.voucher_code,callback:function(e){t.voucher_code=e},expression:"voucher_code"}}),t._v(" "),e("v-btn",{staticClass:"white--text text-center",class:t.$vuetify.breakpoint.smAndDown?"mt-3":"ml-2",style:t.$vuetify.breakpoint.smAndDown?"width: 100%;":"",attrs:{color:"#65382c",elevation:"0","d-block":"",loading:t.loading,disabled:!t.voucher_code.length},on:{click:t.applyVoucher}},[t._v(t._s(t.$t("checkout.apply")))])],1)],2)],1)}),[],!1,null,"16c3ca00",null);e.default=component.exports;installComponents(component,{CheckoutSchedule:o(795).default})},763:function(t,e,o){var content=o(805);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(2).default)("3dbb2646",content,!0,{sourceMap:!1})},795:function(t,e,o){"use strict";o.r(e);o(16),o(15),o(21),o(25),o(20),o(26);var r=o(5),c=(o(34),o(40),o(9),o(36),o(73)),n=o(22),l=o(211),d=o(323),_=o(799);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={props:{same_day:{type:Boolean,default:!0},branch:{type:Object,default:{}},same_date_branch:{type:Object,default:{}}},data:function(){return{date_of_week:[],delivery_time_model:!1,head_branch:""}},components:{VueTimepicker:_.a},computed:v(v(v({},Object(c.b)("checkout",["form.delivery_time","form.delivery_date","form"])),{},{min:function(){}},Object(n.d)("cart",["branch_start","branch_end"])),{},{allowed_hours:function(){var t=[];if(this.$props.same_day)if(this.$auth.loggedIn){if(this.branch_start.includes(":")&&this.branch_end.includes(":")){var e=+this.branch_end.split(":")[0],o=(new Date).getHours()+1;if(8>o)for(var r=8;r<=e;r++)t.push(r);else for(var c=o+1;c<=e;c++)t.push(c)}}else{var n=this.$props.branch;if(n.start.includes(":")&&n.end.includes(":")){var l=+n.end.split(":")[0],d=(new Date).getHours();if(8>d){for(var _=8;_<=l;_++)t.push(_);console.log("timers ==> ",t)}else for(var h=d+1;h<=l;h++)t.push(h)}}else{var v=this.$props.same_date_branch;if(v.start.includes(":")&&v.end.includes(":"))for(var m=+v.end.split(":")[0],i=8;i<=m;i++)t.push(i)}return t},textDisable:function(){return!!((new Date).getHours()>=18&&this.$props.same_day)}}),validations:function(){return{delivery_date:{required:l.helpers.withParams({lang:this.$i18n.locale},l.required)},delivery_time:{required:l.required,minValue:Object(l.minValue)((new Date).getHours())}}},methods:{isAllowedDate:function(t){return this.date_of_week.includes(new Date(t).toDateString())},getDaysFromNow:function(t,e){var o=[],r=new Date;e?r.setDate(r.getDate()+e):r.setDate(r.getDate()),o.push(r.toDateString());for(var i=e||1;i<=t;i++){var c=new Date;c.setDate(c.getDate()+i),o.push(c.toDateString())}return o},setSameDay:function(){console.log("same_day",this.$props.same_day);var t=new Date,e="";t.getMinutes().toString().length,t.getMinutes().toString();this.$props.same_day?(t.getHours()>12?("PM",2!=(e=(t.getHours()-12).toString()).length&&(e="0"+e)):("AM",2!=(e=t.getHours()).length&&(e="0"==e?"12":"0"+e)),this.delivery_date=t.getFullYear()+"-"+(2!=(t.getMonth()+1).toString().length?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(2!=t.getDate().toString().length?"0"+t.getDate():t.getDate()),this.delivery_time={hh:"",mm:"",A:""}):(this.delivery_date=t.getFullYear()+"-"+(2!=(t.getMonth()+1).toString().length?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(2!=(t.getDate()+1).toString().length?"0"+(t.getDate()+1):t.getDate()+1),this.delivery_time={hh:"",mm:"",A:""}),console.log("delivery_date",this.delivery_date),console.log("delivery_time",this.delivery_time)},get_branch:function(){var t=this;Object(d.a)(localStorage.getItem("guest_branch")).then((function(e){var data=e.data;t.branch=data})),Object(d.a)(2).then((function(e){var data=e.data;t.same_date_branch=data}))}},created:function(){this.date_of_week=this.getDaysFromNow(7,1),this.setSameDay()}},f=(o(751),o(6)),component=Object(f.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-5"},[t.same_day?t._e():e("p",{staticClass:"font-weight-bold mb-2"},[t._v("delivery Date")]),t._v(" "),t.same_day?t._e():e("v-menu",{attrs:{disabled:t.same_day,transition:"scale-transition","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(o){var r=o.on,c=o.attrs;return[e("v-text-field",t._g(t._b({staticClass:"rounded-lg",attrs:{label:"Choose Date","append-icon":"mdi-calendar",readonly:"",outlined:"",solo:"",flat:"","error-messages":t.$validationMsgs(t.$v.delivery_date)},on:{input:function(e){return t.$v.delivery_date.$touch()}},model:{value:t.delivery_date,callback:function(e){t.delivery_date=e},expression:"delivery_date"}},"v-text-field",c,!1),r))]}}],null,!1,1287625954)},[t._v(" "),e("v-date-picker",{attrs:{"allowed-dates":t.isAllowedDate,"no-title":"",scrollable:""},model:{value:t.delivery_date,callback:function(e){t.delivery_date=e},expression:"delivery_date"}})],1),t._v(" "),t.same_day?t._e():e("v-divider",{staticClass:"mb-3"}),t._v(" "),e("p",{staticClass:"font-weight-bold mb-2"},[t._v("delivery time")]),t._v(" "),e("v-menu",{ref:"menu",attrs:{transition:"scale-transition","min-width":"auto","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(o){var r=o.on,c=o.attrs;return[e("vue-timepicker",t._g(t._b({staticClass:"rounded-lg",attrs:{disabled:t.textDisable,clearable:"",label:t.$t("choose_time"),"append-icon":"mdi-calendar",readonly:"",outlined:"",dense:"",solo:"",flat:"",placeholder:"Enter Your Time","input-width":"100%",format:"hh:mm A","drop-direction":"up",required:"true","hour-range":t.allowed_hours,"hour-label":"Hour","minute-label":"Minute","apm-label":"AM/PM"},model:{value:t.delivery_time,callback:function(e){t.delivery_time=e},expression:"delivery_time"}},"vue-timepicker",c,!1),r))]}}]),model:{value:t.delivery_time_model,callback:function(e){t.delivery_time_model=e},expression:"delivery_time_model"}})],1)}),[],!1,null,null,null);e.default=component.exports},802:function(t,e,o){o(4)({target:"Math",stat:!0},{sign:o(803)})},803:function(t,e){t.exports=Math.sign||function(t){var e=+t;return 0==e||e!=e?e:e<0?-1:1}},804:function(t,e,o){"use strict";o(763)},805:function(t,e,o){var r=o(1)((function(i){return i[1]}));r.push([t.i,".dropcart__totals[data-v-16c3ca00]{padding:16px 6px 0}.dropcart__product-info .font-primary[data-v-16c3ca00],.dropcart__totals.font-primary[data-v-16c3ca00]{font-size:1rem!important}.dropcart__totals th[data-v-16c3ca00]{padding-right:16px;text-align:left}[dir=rtl] .dropcart__totals th[data-v-16c3ca00]{padding-left:16px;padding-right:0;text-align:right}.dropcart__totals td[data-v-16c3ca00]{text-align:right}[dir=rtl] .dropcart__totals td[data-v-16c3ca00]{text-align:left}.dropcart__totals table[data-v-16c3ca00]{width:100%}",""]),r.locals={},t.exports=r}}]);