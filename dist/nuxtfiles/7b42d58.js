(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{896:function(t,e,o){"use strict";o.r(e);o(15),o(25),o(21),o(26);var c=o(7),n=o(60),r=o(6),l=(o(40),o(32),o(22),o(9),o(69),o(16),o(124),o(163),o(52),o(75),o(95)),d=o(17);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function _(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={data:function(){return{mobileProductDialog:!1,mobileProductDialogData:{},initCheckout:!1,products:[],addToCartLoading:!1,subTotal:0,voucher_code:"",discount:"",discount_type:"",discount_rate:"",newSubTotal:"",loading:!1,productsLoading:!1,dialog:{image_dialog:!1,images:[],note_dialog:!1,notes:[],product_id:"",count:0}}},methods:_(_({},Object(d.b)("cart",["setItemNotes"])),{},{addImage:function(t){this.images=[].concat(Object(n.a)(this.images),[{file:t,id:uuidv4(),type:"new"}])},deleteImage:function(t){"new"!==t.type&&this.deleted_images.push(t.id),this.images=this.images.filter((function(img){return img.id!==t.id}))},updateNote:function(t){this.update_notes.push(t.id)},openDialog:function(t,e){"image"===e?this.openImageDialog(t):this.openNoteDialog(t)},openImageDialog:function(t){this.dialog.images=t.images,this.dialog.product_id=t.product_id,this.dialog.count=0;var e=this;setTimeout((function(){e.dialog.image_dialog=!0}),200)},openNoteDialog:function(t){this.dialog.notes=t.notes,this.dialog.product_id=t.product_id,this.dialog.count=t.quantity;var e=this;setTimeout((function(){e.dialog.note_dialog=!0}),200),this.setItemNotes({itemNotes:t.notes,productId:t.product_id})},toCheckout:function(){this.$router.push(this.localePath(this.$auth.loggedIn?"/checkout/finalize":"/checkout"))},fetch:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var area;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.productsLoading=!0,area=JSON.parse(localStorage.getItem("default_".concat(localStorage.getItem("default_location")))),e.next=4,t.$store.dispatch("cart/get",{branch:area.branches?area.branches[0]:area.branch_id}).then((function(){t.products=t.items,t.subTotal=t.total}));case 4:t.productsLoading=!1;case 5:case"end":return e.stop()}}),e)})))()},i18n_me:function(t,e){return"en"===this.$i18n.locale?e:t},updateDialogShow:function(t){this.mobileProductDialog=t},updateDialogData:function(data){this.mobileProductDialogData=data},applyVoucher:function(){var t=this;this.loading=!0,Object(l.c)({v_code:this.voucher_code,total:this.total}).then((function(e){t.discount_rate=e.discount_rate,t.discount_type=e.discount_type;t.discount=e.discount_rate+{fixed:"KWD",percentage:"%",free_delivevery:"FD"}[t.discount_type],"fixed"==t.discount_type?t.newSubTotal=Number(t.total-Number(t.discount_rate)):"percentage"==t.discount_type?t.newSubTotal=t.total-t.total*(Number(t.discount_rate)/100):"free_delivevery"==t.discount_type&&(t.delivery_cost=0),t.$store.commit("checkout/SET_V_CODE",t.voucher_code),t.loading=!1,t.$toast.success(e.message)})).catch((function(e){t.loading=!1}))},increment:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function o(){var c,r,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return e.addToCartLoading=!0,c=e.products.findIndex((function(i){return i.product_id===t.product_id})),(r=JSON.parse(JSON.stringify(e.products)))[c].quantity=r[c].quantity+1,o.next=6,e.$store.dispatch("cart/setAll",r);case 6:return l=_(_({},t),{},{quantity:t.quantity,images:t.images.map((function(image){return image.file})),notes:[""].concat(Object(n.a)(t.notes.map((function(t){return t.note}))))}),o.next=9,e.$store.dispatch("cart/add",l);case 9:e.addToCartLoading=!1,e.fetch();case 11:case"end":return o.stop()}}),o)})))()},decrement:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function o(){var c,n,r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return e.addToCartLoading=!0,c=e.products.findIndex((function(i){return i.product_id===t.product_id})),(n=JSON.parse(JSON.stringify(e.products)))[c].quantity=n[c].quantity-1,o.next=6,e.$store.dispatch("cart/setAll",n);case 6:return r=_(_({},t),{},{quantity:-1,images:t.images.map((function(image){return image.file})),notes:t.notes.map((function(t){return t.note}))}),o.next=9,e.$store.dispatch("cart/add",r);case 9:e.addToCartLoading=!1,e.fetch();case 11:case"end":return o.stop()}}),o)})))()},changeCount:function(t,e,o,c){var n=this;if(c+t===0)return this.$store.dispatch("cart/remove",e).then((function(){n.fetch()}));1==t?this.increment(o):-1==t&&this.decrement(o)},addToCart:function(t){var e=arguments,o=this;return Object(c.a)(regeneratorRuntime.mark((function c(){var data;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return data=e.length>1&&void 0!==e[1]?e[1]:{},o.addToCartLoading=!0,c.next=4,o.$store.dispatch("cart/add",{product_id:t,quantity:data.count||1}).then((function(){o.fetch()}));case 4:o.addToCartLoading=!1;case 5:case"end":return c.stop()}}),c)})))()}}),computed:_(_({},Object(d.d)("cart",["total","delivery_cost","items"])),{},{disable_checkout:function(){var t=this;return this.items.find((function(e){return e.product.has_image&&e.quantity>e.images.length||t.sub_total<t.minimum_charge||!e.product.in_stock}))}}),mounted:function(){this.fetch()}},f=m,v=o(8),component=Object(v.a)(f,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"pt-5"},[e("p",{staticClass:"text-h7 font-weight-bold mb-5 mx-auto",staticStyle:{width:"fit-content",color:"#65382c","border-bottom":"1px solid #65382c"}},[t._v(t._s(t.$t("cart.order_details")))]),t._v(" "),t._l(t.products,(function(o,c){return t.products.length?e("v-card",{key:c,staticClass:"a-product-card d-flex align-center justify-space-betweenm my-1",staticStyle:{"border-radius":"10px"},style:{border:1==o.product.has_image&&o.images.length<o.quantity?"2px solid red":""},attrs:{width:"100%",color:"#fff"}},[e("v-img",{staticClass:"rounded-lg",staticStyle:{cursor:"pointer"},attrs:{cover:"",height:"50",width:"50","lazy-src":"https://placehold.co/70x70/png?text=Product",src:"https://placehold.co/70x70/png?text=Product"},on:{click:function(e){return t.productViewed(o.product_id)}}}),t._v(" "),e("v-card-text",{staticClass:"py-0 px-2 d-flex flex-row justify-space-between",staticStyle:{height:"40px"}},[e("v-row",{staticClass:"align-center justify-space-between h-100",staticStyle:{height:"100%"},attrs:{"no-gutters":""}},[e("v-col",{staticClass:"px-0 my-0 mx-0 py-0 d-flex flex-column justify-space-between h-100",staticStyle:{height:"100%"}},[e("p",{staticClass:"mb-0 font-weight-bold text-left w-100",class:{"text-right":"ar"==t.$i18n.locale},staticStyle:{color:"#65382c"}},[t._v("\n            "+t._s(o.product["name_".concat(t.$i18n.locale)])+"\n          ")]),t._v(" "),e("p",{staticClass:"mb-0 text-left",class:{"text-right":"ar"==t.$i18n.locale},staticStyle:{color:"#65382c"}},[t._v("\n            "+t._s(o.price)+" "+t._s(t.$t("products.KWD"))+"\n          ")])]),t._v(" "),e("div",{staticClass:"d-flex align-center justify-space-between"},[1==o.product.has_image?e("v-btn",{staticClass:"d-block black--text mx-1",attrs:{icon:"",color:"#65382c",small:""},on:{click:function(e){return t.openDialog(o,"image")}}},[e("v-icon",{attrs:{color:"#65382c"}},[t._v("mdi-image")])],1):t._e(),t._v(" "),1==o.product.has_note?e("v-btn",{staticClass:"d-block black--text mx-1",attrs:{icon:"",color:"#65382c",small:""},on:{click:function(e){return t.openDialog(o,"note")}}},[e("v-icon",{attrs:{color:"#65382c"}},[t._v("mdi-draw-pen")])],1):t._e()],1),t._v(" "),e("div",{staticClass:"d-flex align-center justify-center"},[e("v-btn",{staticClass:"rounded-sm px-0 py-0 mx-0 my-0",attrs:{loading:t.addToCartLoading,small:"",icon:""},on:{click:function(e){return t.changeCount(1,o.product_id,o,o.quantity)}}},[e("v-icon",{staticClass:"mx-0 my-0 rounded",staticStyle:{color:"#65382c"},attrs:{small:""}},[t._v("mdi-plus")])],1),t._v(" "),e("input",{staticClass:"rounded text-center px-0 font-weight-bold",staticStyle:{"text-align":"center",outline:"none",width:"25px",color:"#65382c"},attrs:{type:"text",min:"1",readonly:""},domProps:{value:o.quantity}}),t._v(" "),e("v-btn",{staticClass:"rounded-sm px-0 py-0 mx-0 my-0",attrs:{loading:t.addToCartLoading,small:"",icon:""},on:{click:function(e){return t.changeCount(-1,o.product_id,o,o.quantity)}}},[e("v-icon",{staticClass:"mx-0 my-0 rounded",staticStyle:{color:"#65382c"},attrs:{small:""}},[t._v(t._s(1===o.quantity?"mdi-delete":"mdi-minus"))])],1)],1)],1)],1)],1):t._e()})),t._v(" "),t.products.length||t.productsLoading?t._e():e("p",{staticClass:"text-center font-weight-bold text-h6",staticStyle:{height:"100%",color:"#65382c"}},[t._v("\n    "+t._s(t.$t("cart.no_products"))+"\n  ")]),t._v(" "),t.productsLoading&&0==t.products.length?e("v-row",{staticClass:"justify-center flex-wrap",attrs:{"no-gutters":""}},[e("v-progress-circular",{attrs:{size:50,color:"#65382c",indeterminate:""}})],1):t._e(),t._v(" "),e("v-divider",{staticClass:"my-3",staticStyle:{color:"grey"}}),t._v(" "),e("v-col",{staticClass:"mx-0 my-0 pa-0 px-0 d-flex flex-column align-start"},[e("p",{staticClass:"font-weight-bold text-h7 pb-0 mb-0",staticStyle:{color:"#65382c"}},[t._v(t._s(t.$t("checkout.voucher_code")))]),t._v(" "),e("v-text-field",{staticClass:"rounded-lg mt-0 py-2",staticStyle:{width:"100%"},attrs:{"hide-details":"",outlined:"",color:"#65382c",placeholder:t.$t("checkout.enter_voucher")},scopedSlots:t._u([{key:"append",fn:function(){return[e("v-row",{staticClass:"align-center justify-center",staticStyle:{"margin-top":"-7px"},attrs:{"no-gutters":""}},[e("v-btn",{staticClass:"my-auto mx-0 rounded-lg",attrs:{disabled:!t.voucher_code.length,elevation:"0",text:"",loading:t.loading},on:{click:function(e){return t.applyVoucher()}}},[t._v("\n            "+t._s(t.$t("checkout.apply"))+"\n          ")])],1)]},proxy:!0}]),model:{value:t.voucher_code,callback:function(e){t.voucher_code=e},expression:"voucher_code"}})],1),t._v(" "),e("v-col",{staticClass:"mx-0 my-0 pa-0 px-0"},[e("v-row",{staticClass:"align-center justify-space-between",attrs:{"no-gutters":""}},[e("p",{staticClass:"my-0 mx-0 px-0 py-1 font-weight-bold text-h7",staticStyle:{color:"#65382c"}},[t._v("\n        "+t._s(t.$t("profile.orders.subtotal"))+"\n      ")]),t._v(" "),e("p",{staticClass:"my-0 mx-0 px-0 py-1 font-weight-bold text-h7",staticStyle:{color:"#65382c"}},[t._v("\n        "+t._s(t.subTotal)+" "+t._s(t.$t("products.KWD"))+"\n      ")])]),t._v(" "),t.newSubTotal?e("v-row",{staticClass:"align-center justify-space-between",attrs:{"no-gutters":""}},[e("p",{staticClass:"my-0 mx-0 px-0 py-1 font-weight-bold text-h7",staticStyle:{color:"#65382c"}},[t._v("\n        "+t._s(t.$t("new_sub_total"))+"\n      ")]),t._v(" "),e("p",{staticClass:"my-0 mx-0 px-0 py-1 font-weight-bold text-h7",staticStyle:{color:"#65382c"}},[t._v("\n        "+t._s(t.newSubTotal)+" "+t._s(t.$t("products.KWD"))+"\n      ")])]):t._e(),t._v(" "),t.discount?e("v-row",{staticClass:"align-center justify-space-between",attrs:{"no-gutters":""}},[e("p",{staticClass:"my-0 mx-0 px-0 py-1 font-weight-bold text-h7",staticStyle:{color:"#65382c"}},[t._v("\n        "+t._s(t.$t("checkout.discount"))+"\n      ")]),t._v(" "),e("p",{staticClass:"my-0 mx-0 px-0 py-1 font-weight-bold text-h7",staticStyle:{color:"#65382c"}},[t._v("\n        "+t._s(t.discount)+" "+t._s(t.$t("products.KWD"))+"\n      ")])]):t._e(),t._v(" "),e("v-row",{staticClass:"align-center justify-space-between",attrs:{"no-gutters":""}},[e("p",{staticClass:"my-0 mx-0 px-0 py-1 font-weight-bold text-h7",staticStyle:{color:"#65382c"}},[t._v("\n        "+t._s(t.$t("checkout.delivery_cost"))+"\n      ")]),t._v(" "),e("p",{staticClass:"my-0 mx-0 px-0 py-1 font-weight-bold text-h7",staticStyle:{color:"#65382c"}},[t._v("\n        "+t._s(t.delivery_cost)+" "+t._s(t.$t("products.KWD"))+"\n      ")])]),t._v(" "),e("v-row",{staticClass:"align-center justify-space-between",attrs:{"no-gutters":""}},[e("p",{staticClass:"my-0 mx-0 px-0 py-1 font-weight-bold text-h7",staticStyle:{color:"#65382c"}},[t._v("\n        "+t._s(t.$t("checkout.total"))+"\n      ")]),t._v(" "),e("p",{staticClass:"my-0 mx-0 px-0 py-1 font-weight-bold text-h7",staticStyle:{color:"#65382c"}},[t._v("\n        "+t._s(t.total+t.delivery_cost)+" "+t._s(t.$t("products.KWD"))+"\n      ")])]),t._v(" "),e("v-divider",{staticClass:"my-3",staticStyle:{color:"grey"}}),t._v(" "),e("v-row",{staticClass:"mt-3 mb-0 align-center justify-space-around",attrs:{"no-gutters":""}},[e("v-btn",{staticClass:"rounded-lg",attrs:{disabled:t.disable_checkout,elevation:"0",color:"#ecbaa8"},on:{click:function(e){return t.toCheckout()}}},[t._v(t._s(t.$t("cart.pay_now")))]),t._v(" "),e("v-btn",{staticClass:"rounded-lg",staticStyle:{border:"1px solid grey"},attrs:{elevation:"0",text:"",to:t.localePath("/products")}},[t._v(t._s(t.$t("cart.continue_shopping")))])],1)],1),t._v(" "),e("productImageDialog",{attrs:{value:t.dialog.image_dialog,images:t.dialog.images,"product-id":t.dialog.product_id,count:t.dialog.count,self:!0},on:{close:function(e){t.dialog.image_dialog=!1},updated:function(e){return t.fetch()}}}),t._v(" "),e("productNoteDialog",{attrs:{value:t.dialog.note_dialog,notes:t.dialog.notes,"product-id":t.dialog.product_id,count:t.dialog.count,self:!0},on:{close:function(e){t.dialog.note_dialog=!1},updated:function(e){return t.fetch()}}})],2)}),[],!1,null,null,null);e.default=component.exports}}]);